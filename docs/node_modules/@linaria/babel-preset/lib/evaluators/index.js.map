{"version":3,"file":"index.js","names":["evaluate","cache","code","options","filename","pluginOptions","loadLinariaOptions","m","Module","dependencies","value","exports","processors","tagProcessors"],"sources":["../../src/evaluators/index.ts"],"sourcesContent":["/**\n * This file is an entry point for module evaluation for getting lazy dependencies.\n */\n\nimport type { TransformCacheCollection } from '../cache';\nimport Module from '../module';\nimport loadLinariaOptions from '../transform-stages/helpers/loadLinariaOptions';\nimport type { Options } from '../types';\n\nexport default function evaluate(\n  cache: TransformCacheCollection,\n  code: string,\n  options: Pick<Options, 'filename' | 'pluginOptions'>\n) {\n  const filename = options?.filename ?? 'unknown';\n  const pluginOptions = loadLinariaOptions(options.pluginOptions);\n\n  const m = new Module(filename ?? 'unknown', pluginOptions, cache);\n\n  m.dependencies = [];\n  m.evaluate(code);\n\n  return {\n    value: m.exports,\n    dependencies: m.dependencies,\n    processors: m.tagProcessors,\n  };\n}\n"],"mappings":";;;;;;AAKA;AACA;AAAgF;AANhF;AACA;AACA;;AAOe,SAASA,QAAQ,CAC9BC,KAA+B,EAC/BC,IAAY,EACZC,OAAoD,EACpD;EAAA;EACA,MAAMC,QAAQ,wBAAGD,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEC,QAAQ,iEAAI,SAAS;EAC/C,MAAMC,aAAa,GAAG,IAAAC,2BAAkB,EAACH,OAAO,CAACE,aAAa,CAAC;EAE/D,MAAME,CAAC,GAAG,IAAIC,eAAM,CAACJ,QAAQ,aAARA,QAAQ,cAARA,QAAQ,GAAI,SAAS,EAAEC,aAAa,EAAEJ,KAAK,CAAC;EAEjEM,CAAC,CAACE,YAAY,GAAG,EAAE;EACnBF,CAAC,CAACP,QAAQ,CAACE,IAAI,CAAC;EAEhB,OAAO;IACLQ,KAAK,EAAEH,CAAC,CAACI,OAAO;IAChBF,YAAY,EAAEF,CAAC,CAACE,YAAY;IAC5BG,UAAU,EAAEL,CAAC,CAACM;EAChB,CAAC;AACH"}