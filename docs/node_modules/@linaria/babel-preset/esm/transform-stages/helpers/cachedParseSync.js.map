{"version":3,"file":"cachedParseSync.js","names":["cache","WeakMap","cachedParseSync","babel","code","babelOptions","fileCache","get","Map","has","file","parseSync","set"],"sources":["../../../src/transform-stages/helpers/cachedParseSync.ts"],"sourcesContent":["import type { ParseResult, TransformOptions } from '@babel/core';\n\nimport type { Core } from '../../babel';\n\nconst cache = new WeakMap<\n  Partial<TransformOptions>,\n  Map<string, ParseResult>\n>();\n\nexport default function cachedParseSync(\n  babel: Core,\n  code: string,\n  babelOptions: TransformOptions\n): ParseResult {\n  const fileCache = cache.get(babelOptions) ?? new Map<string, ParseResult>();\n  if (fileCache.has(code)) {\n    return fileCache.get(code)!;\n  }\n\n  const file = babel.parseSync(code, babelOptions)!;\n\n  fileCache.set(code, file);\n  cache.set(babelOptions, fileCache);\n\n  return file;\n}\n"],"mappings":"AAIA,MAAMA,KAAK,GAAG,IAAIC,OAAO,EAGtB;AAEH,eAAe,SAASC,eAAe,CACrCC,KAAW,EACXC,IAAY,EACZC,YAA8B,EACjB;EACb,MAAMC,SAAS,GAAGN,KAAK,CAACO,GAAG,CAACF,YAAY,CAAC,IAAI,IAAIG,GAAG,EAAuB;EAC3E,IAAIF,SAAS,CAACG,GAAG,CAACL,IAAI,CAAC,EAAE;IACvB,OAAOE,SAAS,CAACC,GAAG,CAACH,IAAI,CAAC;EAC5B;EAEA,MAAMM,IAAI,GAAGP,KAAK,CAACQ,SAAS,CAACP,IAAI,EAAEC,YAAY,CAAE;EAEjDC,SAAS,CAACM,GAAG,CAACR,IAAI,EAAEM,IAAI,CAAC;EACzBV,KAAK,CAACY,GAAG,CAACP,YAAY,EAAEC,SAAS,CAAC;EAElC,OAAOI,IAAI;AACb"}